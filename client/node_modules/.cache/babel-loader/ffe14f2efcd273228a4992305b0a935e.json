{"ast":null,"code":"import _slicedToArray from \"/Users/metabou/Desktop/chatapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/metabou/Desktop/chatapp/client/src/components/CreateServer/CreateServer.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport * as actions from '../../redux';\nimport { toast } from 'react-toastify';\nimport ToastMessage from '../../components/ToastMessage/ToastMessage';\nimport usregion from '../../assets/images/usregion.png';\nimport europe from '../../assets/images/europe.png';\nimport russia from '../../assets/images/russia.png';\nimport image from '../../assets/images/image.png';\nimport './CreateServer.css';\n\nconst CreateServer = props => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        isChangingRegion = _useState2[0],\n        setIsChangingRegion = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        serverImageUrl = _useState4[0],\n        setServerImageUrl = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        serverFile = _useState6[0],\n        setServerFile = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        name = _useState8[0],\n        setName = _useState8[1];\n\n  const mainSubmit = React.createRef();\n  const mainFile = React.createRef();\n  const ref = useRef();\n  useOnClickOutside(ref, () => props.setModalOpen(false)); // setModalOpen\n\n  useEffect(() => {\n    if (props.success) {\n      toast.dismiss();\n      toast.success('Success, the server was created!', {\n        position: 'bottom-center'\n      });\n      setTimeout(() => {\n        props.setModalOpen();\n      }, 200);\n    } else if (props.error) {\n      toast.dismiss();\n      toast.error('There was an error creating the server!', {\n        position: 'bottom-center'\n      });\n    }\n  }, [props]);\n\n  const serverCreate = () => {\n    const formData = new FormData();\n    formData.append('name', name);\n    formData.append('userId', props.id);\n    formData.append('public', false);\n    formData.append('region', props.region);\n    formData.append('imageUrl', serverFile);\n    props.serverCreate(formData);\n  };\n\n  const showMainFile = event => {\n    event.preventDefault();\n    let reader = new FileReader();\n    let file = event.target.files[0];\n\n    reader.onloadend = () => {\n      setServerImageUrl(reader.result);\n      setServerFile(file);\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  const clickMainFile = () => {\n    mainFile.current.click();\n  };\n\n  return React.createElement(\"div\", {\n    ref: ref,\n    className: \"servermodal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(ToastMessage, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }), !isChangingRegion ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"servermodal-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Create your server\"), React.createElement(\"p\", {\n    className: \"servermodal-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \"Creating a server will allow you to setup chatrooms and channels to communicate with others.\"), React.createElement(\"p\", {\n    className: \"servermodal-name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Server Name\"), React.createElement(\"input\", {\n    className: \"servermodal-input\",\n    placeholder: \"Enter a server name\",\n    value: name,\n    onChange: event => {\n      setName(event.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    className: \"servermodal-region\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \"Server Region\"), React.createElement(\"div\", {\n    className: \"servermodal-select\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, props.region === \"US West\" || props.region === \"US Central\" || props.region === \"US East\" ? React.createElement(\"img\", {\n    src: usregion,\n    height: 35,\n    width: 55,\n    alt: \"server-region\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }) : null, props.region === \"Central Europe\" || props.region === \"Western Europe\" ? React.createElement(\"img\", {\n    src: europe,\n    height: 35,\n    width: 55,\n    alt: \"server-region\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }) : null, props.region === \"Russia\" ? React.createElement(\"img\", {\n    src: russia,\n    height: 35,\n    width: 55,\n    alt: \"server-region\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }) : null, React.createElement(\"span\", {\n    className: \"servermodal-select-current\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, props.region), React.createElement(\"span\", {\n    className: \"servermodal-select-change\",\n    onClick: () => {\n      setIsChangingRegion(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Change\"), React.createElement(\"input\", {\n    id: \"file\",\n    type: \"file\",\n    style: {\n      display: 'none'\n    },\n    ref: mainFile,\n    onChange: event => {\n      showMainFile(event);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"servermodal-select-image\",\n    ref: mainSubmit,\n    onClick: clickMainFile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: serverImageUrl ? serverImageUrl : image,\n    alt: \"current-server\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    style: {\n      display: serverImageUrl ? 'none' : 'initial'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Change\"), React.createElement(\"p\", {\n    style: {\n      display: serverImageUrl ? 'none' : 'initial'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"icon\"))), React.createElement(\"p\", {\n    className: \"servermodal-rules\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"By creating a server, you agree to meet our community guidelines.\"), React.createElement(\"div\", {\n    className: \"servermodal-actions\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    onClick: props.setModalOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"\\u2190 Back\"), React.createElement(\"button\", {\n    onClick: () => {\n      serverCreate();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Create\"))) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"regionmodal-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Select a server region\"), React.createElement(\"div\", {\n    className: \"regionmodal-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"regionmodal-select\",\n    onClick: () => {\n      props.setRegion(\"US West\");\n      setIsChangingRegion(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: usregion,\n    height: 50,\n    width: 90,\n    alt: \"server-region\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"regionmodal-select-current\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"US West\")), React.createElement(\"div\", {\n    className: \"regionmodal-select\",\n    onClick: () => {\n      props.setRegion(\"US Central\");\n      setIsChangingRegion(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: usregion,\n    height: 50,\n    width: 90,\n    alt: \"server-region\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"regionmodal-select-current\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"US Central\")), React.createElement(\"div\", {\n    className: \"regionmodal-select\",\n    onClick: () => {\n      props.setRegion(\"US East\");\n      setIsChangingRegion(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: usregion,\n    height: 50,\n    width: 90,\n    alt: \"server-region\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"regionmodal-select-current\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"US East\"))), React.createElement(\"div\", {\n    className: \"regionmodal-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"regionmodal-select\",\n    onClick: () => {\n      props.setRegion(\"Western Europe\");\n      setIsChangingRegion(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: europe,\n    height: 50,\n    width: 90,\n    alt: \"server-region\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"regionmodal-select-current\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, \"Western Europe\")), React.createElement(\"div\", {\n    className: \"regionmodal-select\",\n    onClick: () => {\n      props.setRegion(\"Central Europe\");\n      setIsChangingRegion(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: europe,\n    height: 50,\n    width: 90,\n    alt: \"server-region\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"regionmodal-select-current\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, \"Central Europe\")), React.createElement(\"div\", {\n    className: \"regionmodal-select\",\n    onClick: () => {\n      props.setRegion(\"Russia\");\n      setIsChangingRegion(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: russia,\n    height: 50,\n    width: 90,\n    alt: \"server-region\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"regionmodal-select-current\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, \"Russia\")))));\n};\n\nconst useOnClickOutside = (ref, handler) => {\n  useEffect(() => {\n    const listener = event => {\n      // Do nothing if clicking ref's element or descendent elements\n      if (!ref.current || ref.current.contains(event.target)) {\n        return;\n      }\n\n      handler(event);\n    };\n\n    document.addEventListener('mousedown', listener);\n    document.addEventListener('touchstart', listener);\n    return () => {\n      document.removeEventListener('mousedown', listener);\n      document.removeEventListener('touchstart', listener);\n    };\n  }, [ref, handler]);\n};\n\nfunction mapStateToProps({\n  serversReducer\n}) {\n  return {\n    error: serversReducer.error,\n    isLoading: serversReducer.isLoading,\n    success: serversReducer.success\n  };\n}\n\nexport default connect(mapStateToProps, actions)(CreateServer);","map":{"version":3,"sources":["/Users/metabou/Desktop/chatapp/client/src/components/CreateServer/CreateServer.js"],"names":["React","useState","useEffect","useRef","connect","actions","toast","ToastMessage","usregion","europe","russia","image","CreateServer","props","isChangingRegion","setIsChangingRegion","serverImageUrl","setServerImageUrl","serverFile","setServerFile","name","setName","mainSubmit","createRef","mainFile","ref","useOnClickOutside","setModalOpen","success","dismiss","position","setTimeout","error","serverCreate","formData","FormData","append","id","region","showMainFile","event","preventDefault","reader","FileReader","file","target","files","onloadend","result","readAsDataURL","clickMainFile","current","click","value","display","setRegion","handler","listener","contains","document","addEventListener","removeEventListener","mapStateToProps","serversReducer","isLoading"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport * as actions from '../../redux';\nimport { toast } from 'react-toastify';\nimport ToastMessage from '../../components/ToastMessage/ToastMessage';\nimport usregion from '../../assets/images/usregion.png';\nimport europe from '../../assets/images/europe.png';\nimport russia from '../../assets/images/russia.png';\nimport image from '../../assets/images/image.png';\nimport './CreateServer.css';\n\nconst CreateServer = (props) => {\n  const [isChangingRegion, setIsChangingRegion] = useState(false);\n  const [serverImageUrl, setServerImageUrl] = useState(\"\");\n  const [serverFile, setServerFile] = useState(\"\");\n  const [name, setName] = useState(\"\");\n\n  const mainSubmit = React.createRef();\n  const mainFile = React.createRef();\n\n  const ref = useRef();\n  useOnClickOutside(ref, () => props.setModalOpen(false));\n\n\n  // setModalOpen\n  useEffect(() => {\n    if (props.success) {\n      toast.dismiss();\n      toast.success('Success, the server was created!', { position: 'bottom-center' });\n      setTimeout(() => {\n        props.setModalOpen();\n      }, 200);\n    } else if (props.error) {\n      toast.dismiss();\n      toast.error('There was an error creating the server!', { position: 'bottom-center' });\n    }\n  }, [props]);\n\n  const serverCreate = () => {\n    const formData = new FormData();\n    formData.append('name', name);\n    formData.append('userId', props.id);\n    formData.append('public', false);\n    formData.append('region', props.region);\n    formData.append('imageUrl', serverFile);\n    props.serverCreate(formData);\n  }\n\n  const showMainFile = (event) => {\n    event.preventDefault();\n    let reader = new FileReader();\n    let file = event.target.files[0];\n\n    reader.onloadend = () => {\n      setServerImageUrl(reader.result);\n      setServerFile(file);\n    }\n    reader.readAsDataURL(file)\n  }\n\n  const clickMainFile = () => {\n    mainFile.current.click();\n  }\n\n  return (\n    <div ref={ref} className=\"servermodal\">\n      <ToastMessage />\n      {!isChangingRegion ?\n        <div>\n          <h1 className=\"servermodal-title\">Create your server</h1>\n          <p className=\"servermodal-info\">Creating a server will allow you to setup chatrooms and channels to communicate with others.</p>\n          <p className=\"servermodal-name\">Server Name</p>\n          <input className=\"servermodal-input\" placeholder=\"Enter a server name\" value={name} onChange={(event) => { setName(event.target.value); }} />\n          <p className=\"servermodal-region\">Server Region</p>\n          <div className=\"servermodal-select\">\n            {props.region === \"US West\" || props.region === \"US Central\" || props.region === \"US East\" ? <img src={usregion} height={35} width={55} alt=\"server-region\" /> : null}\n            {props.region === \"Central Europe\" || props.region === \"Western Europe\" ? <img src={europe} height={35} width={55} alt=\"server-region\" /> : null}\n            {props.region === \"Russia\" ? <img src={russia} height={35} width={55} alt=\"server-region\" /> : null}\n            <span className=\"servermodal-select-current\">{props.region}</span>\n            <span className=\"servermodal-select-change\" onClick={() => { setIsChangingRegion(true); }}>Change</span>\n            <input id=\"file\" type=\"file\" style={{ display: 'none' }} ref={mainFile} onChange={(event) => { showMainFile(event) }} />\n            <div className=\"servermodal-select-image\" ref={mainSubmit} onClick={clickMainFile}>\n              <img src={serverImageUrl ? serverImageUrl : image} alt=\"current-server\" />\n              <p style={{ display: (serverImageUrl ? 'none' : 'initial') }}>Change</p>\n              <p style={{ display: (serverImageUrl ? 'none' : 'initial') }}>icon</p>\n            </div>\n          </div>\n          <p className=\"servermodal-rules\">By creating a server, you agree to meet our community guidelines.</p>\n          <div className=\"servermodal-actions\">\n            <p onClick={props.setModalOpen}>&larr; Back</p>\n            <button onClick={() => { serverCreate(); }}>Create</button>\n          </div>\n        </div> :\n        <div>\n          <h1 className=\"regionmodal-title\">Select a server region</h1>\n          <div className=\"regionmodal-container\">\n            <div className=\"regionmodal-select\" onClick={() => { props.setRegion(\"US West\"); setIsChangingRegion(false); }}>\n              <img src={usregion} height={50} width={90} alt=\"server-region\" />\n              <span className=\"regionmodal-select-current\">US West</span>\n            </div>\n            <div className=\"regionmodal-select\" onClick={() => { props.setRegion(\"US Central\"); setIsChangingRegion(false); }}>\n              <img src={usregion} height={50} width={90} alt=\"server-region\" />\n              <span className=\"regionmodal-select-current\">US Central</span>\n            </div>\n            <div className=\"regionmodal-select\" onClick={() => { props.setRegion(\"US East\"); setIsChangingRegion(false); }}>\n              <img src={usregion} height={50} width={90} alt=\"server-region\" />\n              <span className=\"regionmodal-select-current\">US East</span>\n            </div>\n          </div>\n          <div className=\"regionmodal-container\">\n            <div className=\"regionmodal-select\" onClick={() => { props.setRegion(\"Western Europe\"); setIsChangingRegion(false); }}>\n              <img src={europe} height={50} width={90} alt=\"server-region\" />\n              <span className=\"regionmodal-select-current\">Western Europe</span>\n            </div>\n            <div className=\"regionmodal-select\" onClick={() => { props.setRegion(\"Central Europe\"); setIsChangingRegion(false); }}>\n              <img src={europe} height={50} width={90} alt=\"server-region\" />\n              <span className=\"regionmodal-select-current\">Central Europe</span>\n            </div>\n            <div className=\"regionmodal-select\" onClick={() => { props.setRegion(\"Russia\"); setIsChangingRegion(false); }}>\n              <img src={russia} height={50} width={90} alt=\"server-region\" />\n              <span className=\"regionmodal-select-current\">Russia</span>\n            </div>\n          </div>\n        </div>}\n    </div>\n  );\n}\n\nconst useOnClickOutside = (ref, handler) => {\n  useEffect(() => {\n    const listener = event => {\n      // Do nothing if clicking ref's element or descendent elements\n      if (!ref.current || ref.current.contains(event.target)) {\n        return;\n      }\n\n      handler(event);\n    };\n\n    document.addEventListener('mousedown', listener);\n    document.addEventListener('touchstart', listener);\n\n    return () => {\n      document.removeEventListener('mousedown', listener);\n      document.removeEventListener('touchstart', listener);\n    };\n  }, [ref, handler]);\n}\n\nfunction mapStateToProps({ serversReducer }) {\n  return {\n    error: serversReducer.error,\n    isLoading: serversReducer.isLoading,\n    success: serversReducer.success\n  };\n}\n\nexport default connect(mapStateToProps, actions)(CreateServer);"]},"metadata":{},"sourceType":"module"}