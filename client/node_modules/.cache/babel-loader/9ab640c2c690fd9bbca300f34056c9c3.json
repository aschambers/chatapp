{"ast":null,"code":"/* jshint node: true */\n'use strict';\n/**\n  ## cog/jsonparse\n\n  ```js\n  var jsonparse = require('cog/jsonparse');\n  ```\n\n  ### jsonparse(input)\n\n  This function will attempt to automatically detect stringified JSON, and\n  when detected will parse into JSON objects.  The function looks for strings\n  that look and smell like stringified JSON, and if found attempts to\n  `JSON.parse` the input into a valid object.\n\n**/\n\nmodule.exports = function (input) {\n  var isString = typeof input == 'string' || input instanceof String;\n  var reNumeric = /^\\-?\\d+\\.?\\d*$/;\n  var shouldParse;\n  var firstChar;\n  var lastChar;\n\n  if (!isString || input.length < 2) {\n    if (isString && reNumeric.test(input)) {\n      return parseFloat(input);\n    }\n\n    return input;\n  } // check for true or false\n\n\n  if (input === 'true' || input === 'false') {\n    return input === 'true';\n  } // check for null\n\n\n  if (input === 'null') {\n    return null;\n  } // get the first and last characters\n\n\n  firstChar = input.charAt(0);\n  lastChar = input.charAt(input.length - 1); // determine whether we should JSON.parse the input\n\n  shouldParse = firstChar == '{' && lastChar == '}' || firstChar == '[' && lastChar == ']' || firstChar == '\"' && lastChar == '\"';\n\n  if (shouldParse) {\n    try {\n      return JSON.parse(input);\n    } catch (e) {// apparently it wasn't valid json, carry on with regular processing\n    }\n  }\n\n  return reNumeric.test(input) ? parseFloat(input) : input;\n};","map":null,"metadata":{},"sourceType":"script"}