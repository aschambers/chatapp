{"ast":null,"code":"var _jsxFileName = \"/Users/metabou/Desktop/ChatterSanctum/chatapp/client/src/components/Chatroom/Chatroom.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as actions from '../../redux';\nimport { ROOT_URL } from '../../config/networkSettings';\nimport io from \"socket.io-client\";\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport './Chatroom.css';\nimport Loading from '../../components/Loading/Loading';\nimport chatot from '../../assets/images/chatot.png';\nimport numbersign from '../../assets/images/numbersign.png';\nimport editwhite from '../../assets/images/editwhite.png';\n\nclass Chatroom extends Component {\n  constructor(props) {\n    super(props);\n\n    this.useOnClickOutside = (ref, handler) => {\n      const listener = event => {\n        // Do nothing if clicking ref's element or descendent elements\n        if (!ref.current || ref.current.contains(event.target)) {\n          return;\n        }\n\n        handler(event);\n      };\n\n      document.addEventListener('mousedown', listener);\n      document.addEventListener('touchstart', listener);\n      return () => {\n        document.removeEventListener('mousedown', listener);\n        document.removeEventListener('touchstart', listener);\n      };\n    };\n\n    this.sendMessage = event => {\n      if (event) {\n        event.preventDefault();\n        const data = {\n          username: this.props.username,\n          message: this.state.message,\n          userId: this.props.userId,\n          chatroomId: this.state.chatroomId,\n          room: this.state.room\n        };\n        this.socket.emit('CHATROOM_MESSAGE', data);\n        this.setState({\n          message: \"\"\n        });\n      }\n    };\n\n    this.sideContextMenu = (event, item) => {\n      event.preventDefault();\n      this.setState({\n        sideRightClickedUser: item,\n        sideUserModalOpen: true\n      });\n    };\n\n    this.contextMenu = (event, item) => {\n      event.preventDefault();\n      this.setState({\n        rightClickedUser: item,\n        userModalOpen: true,\n        messageMenu: false,\n        editingMessage: null\n      });\n    };\n\n    this.privateMessageUser = () => {\n      this.setState({\n        messages: []\n      });\n      this.props.privateMessageUser(this.state.rightClickedUser);\n    };\n\n    this.sidePrivateMessageUser = () => {\n      this.setState({\n        messages: []\n      });\n      this.props.privateMessageUser(this.state.sideRightClickedUser);\n    };\n\n    this.openMessageMenu = item => {\n      this.setState({\n        messageMenu: true,\n        editMessage: item\n      });\n    };\n\n    this.deleteChatroomMessage = () => {\n      const data = {\n        username: this.props.username,\n        message: this.state.message,\n        userId: this.props.userId,\n        chatroomId: this.state.chatroomId,\n        messageId: this.state.editMessage.id,\n        room: this.state.room\n      };\n      this.socket.emit('DELETE_CHATROOM_MESSAGE', data);\n    };\n\n    this.editChatroomMessage = () => {\n      this.setState({\n        editingMessage: this.state.editMessage,\n        newMessage: this.state.editMessage.message,\n        hover: \"\"\n      }, () => {\n        this.setState({\n          editMessage: null,\n          messageMenu: false\n        });\n      });\n    };\n\n    this.detectEscape = event => {\n      if (event.keyCode === 27 && !this.state.messageMenu) {\n        this.setState({\n          editingMessage: this.state.editMessage,\n          newMessage: \"\"\n        });\n      }\n    };\n\n    this.sendEditedMessage = event => {\n      event.preventDefault();\n      const data = {\n        username: this.props.username,\n        message: this.state.newMessage,\n        userId: this.props.userId,\n        chatroomId: this.state.chatroomId,\n        messageId: this.state.editingMessage.id,\n        room: this.state.room\n      };\n      this.socket.emit('EDIT_CHATROOM_MESSAGE', data);\n    };\n\n    this.kickUser = user => {\n      const data = {\n        serverId: this.state.serverId,\n        chatroomId: this.state.chatroomId,\n        type: 'user',\n        userId: user.userId,\n        room: this.state.room\n      };\n      this.socket.emit('KICK_SERVER_USER', data);\n    };\n\n    this.banUser = user => {\n      const data = {\n        serverId: this.state.serverId,\n        chatroomId: this.state.chatroomId,\n        type: 'user',\n        userId: user.userId,\n        room: this.state.room\n      };\n      this.socket.emit('BAN_SERVER_USER', data);\n    };\n\n    this.ref = React.createRef();\n    this.useOnClickOutside(this.ref, () => this.setState({\n      messageMenu: false,\n      userModalOpen: false,\n      sideUserModalOpen: false\n    }));\n    this.state = {\n      id: \"\",\n      username: \"\",\n      active: false,\n      type: \"\",\n      imageUrl: \"\",\n      message: \"\",\n      messages: [],\n      users: [],\n      clickedUsername: \"\",\n      clickedType: \"\",\n      privateMessages: [],\n      personalMessages: [],\n      userDetails: false,\n      socketId: \"\",\n      currentSocket: \"\",\n      rightClickedUser: {},\n      sideRightClickedUser: {},\n      sideUserModalOpen: false,\n      userModalOpen: false,\n      namespace: null,\n      room: null,\n      serverId: null,\n      previousRoom: null,\n      currentChatroom: null,\n      editMessage: null,\n      messageMenu: false,\n      editingMessage: null,\n      newMessage: \"\",\n      hover: \"\",\n      serverUserList: [],\n      isLoading: false\n    };\n  }\n\n  async componentDidMount() {\n    this.setState({\n      isLoading: true\n    });\n    window.addEventListener('keydown', this.detectEscape);\n    this.props.getUsers();\n    this.socket = io(ROOT_URL);\n    this.socket.on('connect', () => {\n      this.setState({\n        serverUserList: this.props.serverUserList,\n        socketId: this.socket.id,\n        namespace: \"\".concat(ROOT_URL, \"/\").concat(this.props.serverId),\n        room: \"\".concat(ROOT_URL, \"/chatroom/\").concat(this.props.serverId, \"/\").concat(this.props.activeChatroomId),\n        previousRoom: \"\".concat(ROOT_URL, \"/chatroom/\").concat(this.props.serverId, \"/\").concat(this.props.activeChatroomId),\n        serverId: this.props.serverId,\n        currentChatroom: this.props.activeChatroom,\n        chatroomId: this.props.activeChatroomId,\n        username: this.props.username\n      });\n      this.socket.emit('GET_CHATROOM_MESSAGES', {\n        socketId: this.socket.id,\n        chatroomId: this.props.activeChatroomId,\n        previousRoom: \"\".concat(ROOT_URL, \"/chatroom/\").concat(this.props.serverId, \"/\").concat(this.props.activeChatroomId),\n        room: \"\".concat(ROOT_URL, \"/chatroom/\").concat(this.props.serverId, \"/\").concat(this.props.activeChatroomId)\n      });\n      this.socket.emit('GET_SERVER_LIST', {\n        socketId: this.socket.id,\n        serverId: this.props.serverId,\n        previousRoom: \"\".concat(ROOT_URL, \"/chatroom/\").concat(this.props.serverId, \"/\").concat(this.props.activeChatroomId),\n        room: \"\".concat(ROOT_URL, \"/chatroom/\").concat(this.props.serverId, \"/\").concat(this.props.activeChatroomId)\n      });\n    });\n    this.socket.on('RECEIVE_CHATROOM_MESSAGES', data => {\n      this.setState({\n        messageMenu: false,\n        editMessage: null,\n        editingMessage: null,\n        newMessage: \"\"\n      }); // scroll to latest message after rendering messages in firefox\n\n      if (navigator.userAgent.search(\"Firefox\") > -1 || navigator.userAgent.search(\"Edge\") > -1) {\n        this.setState({\n          messages: data.reverse()\n        }, () => {\n          if (data && data.length > 0) {\n            const element = \"message\" + (this.state.messages.length - 1);\n\n            if (document.getElementById(element)) {\n              document.getElementById(element).scrollIntoView();\n            }\n          }\n        });\n      } else if (navigator.userAgent.search(\"Firefox\") < 0 || navigator.userAgent.search(\"Edge\") < 0) {\n        this.setState({\n          messages: data\n        });\n      }\n    });\n    this.socket.on('RECEIVE_SERVER_LIST', data => {\n      const index = data.findIndex(x => x.username === this.state.username);\n\n      if (index < 0) {\n        this.props.leaveServer();\n      } else if (index > -1) {\n        this.props.refreshServerUsers();\n        this.setState({\n          userModalOpen: false,\n          sideUserModalOpen: false,\n          rightClickedUser: {},\n          sideRightClickedUser: {},\n          serverUserList: data,\n          isLoading: false\n        });\n      }\n    });\n  }\n\n  async componentWillReceiveProps(nextProps) {\n    if (nextProps.username) {\n      this.setState({\n        username: nextProps.username\n      });\n    }\n\n    if (nextProps.serverUserList) {\n      this.setState({\n        serverUserList: nextProps.serverUserList\n      });\n    }\n\n    if (nextProps.activeChatroomId !== this.state.chatroomId && this.state.chatroomId !== undefined) {\n      this.setState({\n        previousRoom: \"\".concat(ROOT_URL, \"/chatroom/\").concat(nextProps.serverId, \"/\").concat(this.state.chatroomId),\n        room: \"\".concat(ROOT_URL, \"/chatroom/\").concat(nextProps.serverId, \"/\").concat(nextProps.activeChatroomId),\n        serverId: nextProps.serverId,\n        currentChatroom: nextProps.activeChatroom,\n        chatroomId: nextProps.activeChatroomId\n      });\n      this.socket.emit('GET_CHATROOM_MESSAGES', {\n        socketId: this.state.socketId,\n        chatroomId: nextProps.activeChatroomId,\n        previousRoom: \"\".concat(ROOT_URL, \"/chatroom/\").concat(nextProps.serverId, \"/\").concat(this.state.chatroomId),\n        room: \"\".concat(ROOT_URL, \"/chatroom/\").concat(nextProps.serverId, \"/\").concat(nextProps.activeChatroomId)\n      });\n    }\n\n    if (nextProps.users && nextProps.users.length) {\n      const userList = [];\n\n      for (let i = 0; i < nextProps.users.length; i++) {\n        userList.push(nextProps.users[i]);\n      }\n\n      this.setState({\n        users: userList\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.socket.emit('LEAVE_CHATROOMS', {\n      room: this.state.room\n    });\n  }\n\n  render() {\n    if (this.state.isLoading) {\n      return React.createElement(\"div\", {\n        className: \"chatroom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"chatarea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      })));\n    } else {\n      return React.createElement(\"div\", {\n        className: \"chatroom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"chatarea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"chatarea-topbar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: numbersign,\n        alt: \"channel\",\n        height: 16,\n        width: 16,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, this.props.activeChatroom)), React.createElement(\"div\", {\n        id: \"chatareamessages\",\n        className: \"chatarea-messages\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, this.state.messages && this.state.messages.length > 0 ? this.state.messages.map((item, index) => {\n        const moderate = this.state.serverUserList.length > 0 && this.state.serverUserList.some(serverItem => serverItem['username'] !== this.state.username && serverItem['username'] === item.username && serverItem['type'] !== 'owner' && serverItem['type'] !== 'admin');\n        return React.createElement(\"div\", {\n          id: \"message\" + index,\n          key: index,\n          onMouseEnter: () => {\n            this.setState({\n              hover: this.state.editingMessage || this.state.messageMenu || this.props.userId !== item.userId ? \"\" : \"message\" + index\n            });\n          },\n          onMouseLeave: () => {\n            this.setState({\n              hover: \"\"\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"chatarea-messages-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"chatarea-messages-user\",\n          onClick: this.handleClick,\n          onContextMenu: event => {\n            this.contextMenu(event, item);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, item.username), React.createElement(Moment, {\n          format: \"MM/DD/YYYY\",\n          date: item.updatedAt,\n          className: \"chatarea-messages-time\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }), this.state.hover === \"message\" + index ? React.createElement(\"span\", {\n          className: \"chatarea-messages-menu\",\n          onClick: () => {\n            this.openMessageMenu(item);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: editwhite,\n          height: 15,\n          width: 15,\n          alt: \"edit message\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        })) : null, this.state.messageMenu && this.state.editMessage.id === item.id ? React.createElement(\"div\", {\n          className: \"chatarea-messages-editmenu\",\n          ref: this.ref,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          onClick: () => {\n            this.setState({\n              editMessage: null,\n              messageMenu: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292\n          },\n          __self: this\n        }, \"\\u2715\"), React.createElement(\"p\", {\n          onClick: () => {\n            this.editChatroomMessage();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        }, \"Edit\"), React.createElement(\"p\", {\n          onClick: () => {\n            this.deleteChatroomMessage();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, \"Delete\")) : null, this.state.userModalOpen && this.state.rightClickedUser.id === item.id ? React.createElement(\"div\", {\n          ref: this.ref,\n          className: moderate === true ? \"chatarea-messages-usermodalmod\" : \"chatarea-messages-usermodal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          onClick: () => {\n            this.setState({\n              userModalOpen: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299\n          },\n          __self: this\n        }, \"\\u2715\"), React.createElement(\"p\", {\n          onClick: () => {\n            this.privateMessageUser();\n          },\n          className: moderate === true ? \"chatarea-messages-usermodalmod-privatemessage\" : \"chatarea-messages-usermodal-privatemessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300\n          },\n          __self: this\n        }, \"Send Message\"), moderate === true ? React.createElement(\"p\", {\n          onClick: () => {\n            this.kickUser(item);\n          },\n          className: \"chatarea-messages-usermodalmod-kick\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 302\n          },\n          __self: this\n        }, \"Kick \", item.username) : null, moderate === true ? React.createElement(\"p\", {\n          onClick: () => {\n            this.banUser(item);\n          },\n          className: \"chatarea-messages-usermodalmod-ban\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 304\n          },\n          __self: this\n        }, \"Ban \", item.username) : null) : null), this.state.editingMessage !== null && this.state.editingMessage.id === item.id ? React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          className: \"chatarea-messages-editmessage\",\n          onChange: event => {\n            this.setState({\n              newMessage: event.target.value\n            });\n          },\n          value: this.state.newMessage,\n          onKeyDown: event => {\n            event.keyCode === 13 && event.shiftKey === false ? this.sendEditedMessage(event) : this.sendMessage(null);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"chatarea-messages-editmessage-note\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }, \"escape to cancel \\u2022 enter to save\")) : React.createElement(\"p\", {\n          className: \"chatarea-messages-message\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }, item.message));\n      }) : null), React.createElement(\"div\", {\n        className: \"chatarea-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        placeholder: \"Send a message!\",\n        type: \"text\",\n        onChange: event => {\n          this.setState({\n            message: event.target.value\n          });\n        },\n        value: this.state.message,\n        onKeyDown: event => {\n          event.keyCode === 13 && event.shiftKey === false ? this.sendMessage(event) : this.sendMessage(null);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"sidebarright\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sidebarright-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        placeholder: \"Filter users in server\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"sidebarright-border\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"sidebarright-authority\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, \"Room Owners\")), React.createElement(\"div\", {\n        className: \"sidebarright-bordertwo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }), this.state.serverUserList.length > 0 ? this.state.serverUserList.map((user, index) => {\n        return React.createElement(\"div\", {\n          key: index,\n          className: user.type === 'owner' ? \"sidebarright-usercontainer\" : \"\",\n          onClick: this.handleClick,\n          onContextMenu: event => {\n            this.sideContextMenu(event, user);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 328\n          },\n          __self: this\n        }, user.type === 'owner' ? React.createElement(\"div\", {\n          className: \"username\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 329\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"username-image\",\n          src: user.imageUrl ? user.imageUrl : chatot,\n          alt: \"username-icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 330\n          },\n          __self: this\n        })) : null, user.type === 'owner' && user.active ? React.createElement(\"div\", {\n          className: \"userinfo-online\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 332\n          },\n          __self: this\n        }) : null, user.type === 'owner' && !user.active ? React.createElement(\"div\", {\n          className: \"userinfo-offline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 333\n          },\n          __self: this\n        }) : null, user.type === 'owner' ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 335\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"sidebarright-user\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 336\n          },\n          __self: this\n        }, user.username), this.state.sideUserModalOpen && user.type === 'owner' && this.state.sideRightClickedUser.username === user.username ? React.createElement(\"div\", {\n          ref: this.ref,\n          className: \"chatarea-messages-sideusermodal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 338\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          onClick: () => {\n            this.setState({\n              sideUserModalOpen: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 339\n          },\n          __self: this\n        }, \"\\u2715\"), React.createElement(\"p\", {\n          onClick: () => {\n            this.sidePrivateMessageUser();\n          },\n          className: \"chatarea-messages-sideusermodal-privatemessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 340\n          },\n          __self: this\n        }, \"Send Message\")) : null) : null);\n      }) : null, this.state.serverUserList.length > 0 && this.state.serverUserList.some(item => item['type'] === 'owner') ? React.createElement(\"div\", {\n        className: \"sidebarright-bordertwo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }) : null, React.createElement(\"div\", {\n        className: \"sidebarright-authority\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }, \"Administrators\")), React.createElement(\"div\", {\n        className: \"sidebarright-bordertwo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      }), this.state.serverUserList.length > 0 ? this.state.serverUserList.map((user, index) => {\n        return React.createElement(\"div\", {\n          key: index,\n          className: user.type === 'admin' ? \"sidebarright-usercontainer\" : \"\",\n          onClick: this.handleClick,\n          onContextMenu: event => {\n            this.sideContextMenu(event, user);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 355\n          },\n          __self: this\n        }, user.type === 'admin' ? React.createElement(\"div\", {\n          className: \"username\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 356\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"username-image\",\n          src: user.imageUrl ? user.imageUrl : chatot,\n          alt: \"username-icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 357\n          },\n          __self: this\n        })) : null, user.type === 'admin' && user.active ? React.createElement(\"div\", {\n          className: \"userinfo-online\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 359\n          },\n          __self: this\n        }) : null, user.type === 'admin' && !user.active ? React.createElement(\"div\", {\n          className: \"userinfo-offline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 360\n          },\n          __self: this\n        }) : null, user.type === 'admin' ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 362\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"sidebarright-user\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 363\n          },\n          __self: this\n        }, user.username), this.state.sideUserModalOpen && user.type === 'admin' && this.state.sideRightClickedUser.username === user.username ? React.createElement(\"div\", {\n          ref: this.ref,\n          className: \"chatarea-messages-sideusermodal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 365\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          onClick: () => {\n            this.setState({\n              sideUserModalOpen: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 366\n          },\n          __self: this\n        }, \"\\u2715\"), React.createElement(\"p\", {\n          onClick: () => {\n            this.sidePrivateMessageUser();\n          },\n          className: \"chatarea-messages-sideusermodal-privatemessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 367\n          },\n          __self: this\n        }, \"Send Message\")) : null) : null);\n      }) : null, this.state.serverUserList.length > 0 && this.state.serverUserList.some(item => item['type'] === 'admin') ? React.createElement(\"div\", {\n        className: \"sidebarright-bordertwo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }) : null, React.createElement(\"div\", {\n        className: \"sidebarright-authority\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }, \"Moderators\")), React.createElement(\"div\", {\n        className: \"sidebarright-bordertwo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }), this.state.serverUserList.length > 0 ? this.state.serverUserList.map((user, index) => {\n        const moderate = user.username !== this.state.username;\n        return React.createElement(\"div\", {\n          key: index,\n          className: user.type === 'moderator' ? \"sidebarright-usercontainer\" : \"\",\n          onClick: this.handleClick,\n          onContextMenu: event => {\n            this.sideContextMenu(event, user);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 383\n          },\n          __self: this\n        }, user.type === 'moderator' ? React.createElement(\"div\", {\n          className: \"username\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 384\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"username-image\",\n          src: user.imageUrl ? user.imageUrl : chatot,\n          alt: \"username-icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 385\n          },\n          __self: this\n        })) : null, user.type === 'moderator' && user.active ? React.createElement(\"div\", {\n          className: \"userinfo-online\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 387\n          },\n          __self: this\n        }) : null, user.type === 'moderator' && !user.active ? React.createElement(\"div\", {\n          className: \"userinfo-offline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 388\n          },\n          __self: this\n        }) : null, user.type === 'moderator' ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 390\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"sidebarright-user\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 391\n          },\n          __self: this\n        }, user.username), this.state.sideUserModalOpen && user.type === 'moderator' && this.state.sideRightClickedUser.username === user.username ? React.createElement(\"div\", {\n          ref: this.ref,\n          className: moderate === true ? \"chatarea-messages-sideusermodalmod\" : \"chatarea-messages-sideusermodal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 393\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          onClick: () => {\n            this.setState({\n              sideUserModalOpen: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 394\n          },\n          __self: this\n        }, \"\\u2715\"), React.createElement(\"p\", {\n          onClick: () => {\n            this.sidePrivateMessageUser();\n          },\n          className: moderate === true ? \"chatarea-messages-sideusermodalmod-privatemessage\" : \"chatarea-messages-sideusermodal-privatemessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 395\n          },\n          __self: this\n        }, \"Send Message\"), moderate === true ? React.createElement(\"p\", {\n          onClick: () => {\n            this.kickUser(user);\n          },\n          className: \"chatarea-messages-sideusermodalmod-kick\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 397\n          },\n          __self: this\n        }, \"Kick \", user.username) : null, moderate === true ? React.createElement(\"p\", {\n          onClick: () => {\n            this.banUser(user);\n          },\n          className: \"chatarea-messages-sideusermodalmod-ban\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 399\n          },\n          __self: this\n        }, \"Ban \", user.username) : null) : null) : null);\n      }) : null, this.state.serverUserList.length > 0 && this.state.serverUserList.some(item => item['type'] === 'moderator') ? React.createElement(\"div\", {\n        className: \"sidebarright-bordertwo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407\n        },\n        __self: this\n      }) : null, React.createElement(\"div\", {\n        className: \"sidebarright-authority\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409\n        },\n        __self: this\n      }, \"Voice\")), React.createElement(\"div\", {\n        className: \"sidebarright-bordertwo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }), this.state.serverUserList.length > 0 ? this.state.serverUserList.map((user, index) => {\n        const moderate = user.username !== this.state.username;\n        return React.createElement(\"div\", {\n          key: index,\n          className: user.type === 'voice' ? \"sidebarright-usercontainer\" : \"\",\n          onClick: this.handleClick,\n          onContextMenu: event => {\n            this.sideContextMenu(event, user);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 415\n          },\n          __self: this\n        }, user.type === 'voice' ? React.createElement(\"div\", {\n          className: \"username\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 416\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"username-image\",\n          src: user.imageUrl ? user.imageUrl : chatot,\n          alt: \"username-icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 417\n          },\n          __self: this\n        })) : null, user.type === 'voice' && user.active ? React.createElement(\"div\", {\n          className: \"userinfo-online\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 419\n          },\n          __self: this\n        }) : null, user.type === 'voice' && !user.active ? React.createElement(\"div\", {\n          className: \"userinfo-offline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 420\n          },\n          __self: this\n        }) : null, user.type === 'voice' ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 422\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"sidebarright-user\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 423\n          },\n          __self: this\n        }, user.username), this.state.sideUserModalOpen && user.type === 'voice' && this.state.sideRightClickedUser.username === user.username ? React.createElement(\"div\", {\n          ref: this.ref,\n          className: moderate === true ? \"chatarea-messages-sideusermodalmod\" : \"chatarea-messages-sideusermodal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 425\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          onClick: () => {\n            this.setState({\n              sideUserModalOpen: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 426\n          },\n          __self: this\n        }, \"\\u2715\"), React.createElement(\"p\", {\n          onClick: () => {\n            this.sidePrivateMessageUser();\n          },\n          className: moderate === true ? \"chatarea-messages-sideusermodalmod-privatemessage\" : \"chatarea-messages-sideusermodal-privatemessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 427\n          },\n          __self: this\n        }, \"Send Message\"), moderate === true ? React.createElement(\"p\", {\n          onClick: () => {\n            this.kickUser(user);\n          },\n          className: \"chatarea-messages-sideusermodalmod-kick\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 429\n          },\n          __self: this\n        }, \"Kick \", user.username) : null, moderate === true ? React.createElement(\"p\", {\n          onClick: () => {\n            this.banUser(user);\n          },\n          className: \"chatarea-messages-sideusermodalmod-ban\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 431\n          },\n          __self: this\n        }, \"Ban \", user.username) : null) : null) : null);\n      }) : null, this.state.serverUserList.length > 0 && this.state.serverUserList.some(item => item['type'] === 'voice') ? React.createElement(\"div\", {\n        className: \"sidebarright-bordertwo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439\n        },\n        __self: this\n      }) : null, React.createElement(\"div\", {\n        className: \"sidebarright-authority\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }, \"Users\")), React.createElement(\"div\", {\n        className: \"sidebarright-bordertwo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443\n        },\n        __self: this\n      }), this.state.serverUserList.length > 0 ? this.state.serverUserList.map((user, index) => {\n        const moderate = user.username !== this.state.username;\n        return React.createElement(\"div\", {\n          key: index,\n          className: user.type === 'user' ? \"sidebarright-usercontainer\" : \"\",\n          onClick: this.handleClick,\n          onContextMenu: event => {\n            this.sideContextMenu(event, user);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 447\n          },\n          __self: this\n        }, user.type === 'user' ? React.createElement(\"div\", {\n          className: \"username\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 448\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"username-image\",\n          src: user.imageUrl ? user.imageUrl : chatot,\n          alt: \"username-icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 449\n          },\n          __self: this\n        })) : null, user.type === 'user' && user.active ? React.createElement(\"div\", {\n          className: \"userinfo-online\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 451\n          },\n          __self: this\n        }) : null, user.type === 'user' && !user.active ? React.createElement(\"div\", {\n          className: \"userinfo-offline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 452\n          },\n          __self: this\n        }) : null, user.type === 'user' ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 454\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"sidebarright-user\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 455\n          },\n          __self: this\n        }, user.username), this.state.sideUserModalOpen && user.type === 'user' && this.state.sideRightClickedUser.username === user.username ? React.createElement(\"div\", {\n          ref: this.ref,\n          className: moderate === true ? \"chatarea-messages-sideusermodalmod\" : \"chatarea-messages-sideusermodal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 457\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          onClick: () => {\n            this.setState({\n              sideUserModalOpen: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 458\n          },\n          __self: this\n        }, \"\\u2715\"), React.createElement(\"p\", {\n          onClick: () => {\n            this.sidePrivateMessageUser();\n          },\n          className: moderate === true ? \"chatarea-messages-sideusermodalmod-privatemessage\" : \"chatarea-messages-sideusermodal-privatemessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 459\n          },\n          __self: this\n        }, \"Send Message\"), moderate === true ? React.createElement(\"p\", {\n          onClick: () => {\n            this.kickUser(user);\n          },\n          className: \"chatarea-messages-sideusermodalmod-kick\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 461\n          },\n          __self: this\n        }, \"Kick \", user.username) : null, moderate === true ? React.createElement(\"p\", {\n          onClick: () => {\n            this.banUser(user);\n          },\n          className: \"chatarea-messages-sideusermodalmod-ban\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 463\n          },\n          __self: this\n        }, \"Ban \", user.username) : null) : null) : null);\n      }) : null));\n    }\n  }\n\n}\n\nfunction mapStateToProps({\n  usersReducer\n}) {\n  return {\n    error: usersReducer.error,\n    isLoading: usersReducer.isLoading,\n    success: usersReducer.success,\n    user: usersReducer.user,\n    users: usersReducer.users\n  };\n}\n\nexport default connect(mapStateToProps, actions)(Chatroom);","map":{"version":3,"sources":["/Users/metabou/Desktop/ChatterSanctum/chatapp/client/src/components/Chatroom/Chatroom.js"],"names":["React","Component","connect","actions","ROOT_URL","io","Moment","Loading","chatot","numbersign","editwhite","Chatroom","constructor","props","useOnClickOutside","ref","handler","listener","event","current","contains","target","document","addEventListener","removeEventListener","sendMessage","preventDefault","data","username","message","state","userId","chatroomId","room","socket","emit","setState","sideContextMenu","item","sideRightClickedUser","sideUserModalOpen","contextMenu","rightClickedUser","userModalOpen","messageMenu","editingMessage","privateMessageUser","messages","sidePrivateMessageUser","openMessageMenu","editMessage","deleteChatroomMessage","messageId","id","editChatroomMessage","newMessage","hover","detectEscape","keyCode","sendEditedMessage","kickUser","user","serverId","type","banUser","createRef","active","imageUrl","users","clickedUsername","clickedType","privateMessages","personalMessages","userDetails","socketId","currentSocket","namespace","previousRoom","currentChatroom","serverUserList","isLoading","componentDidMount","window","getUsers","on","activeChatroomId","activeChatroom","navigator","userAgent","search","reverse","length","element","getElementById","scrollIntoView","index","findIndex","x","leaveServer","refreshServerUsers","componentWillReceiveProps","nextProps","undefined","userList","i","push","componentWillUnmount","render","map","moderate","some","serverItem","handleClick","updatedAt","value","shiftKey","mapStateToProps","usersReducer","error","success"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as actions from '../../redux';\nimport { ROOT_URL } from '../../config/networkSettings';\nimport io from \"socket.io-client\";\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport './Chatroom.css';\nimport Loading from '../../components/Loading/Loading';\nimport chatot from '../../assets/images/chatot.png';\nimport numbersign from '../../assets/images/numbersign.png';\nimport editwhite from '../../assets/images/editwhite.png';\n\nclass Chatroom extends Component {\n  constructor(props) {\n    super(props);\n    this.ref = React.createRef();\n    this.useOnClickOutside(this.ref, () => this.setState({ messageMenu: false, userModalOpen: false, sideUserModalOpen: false }));\n\n    this.state = {\n      id: \"\",\n      username: \"\",\n      active: false,\n      type: \"\",\n      imageUrl: \"\",\n      message: \"\",\n      messages: [],\n      users: [],\n      clickedUsername: \"\",\n      clickedType: \"\",\n      privateMessages: [],\n      personalMessages: [],\n      userDetails: false,\n      socketId: \"\",\n      currentSocket: \"\",\n      rightClickedUser: {},\n      sideRightClickedUser: {},\n      sideUserModalOpen: false,\n      userModalOpen: false,\n      namespace: null,\n      room: null,\n      serverId: null,\n      previousRoom: null,\n      currentChatroom: null,\n      editMessage: null,\n      messageMenu: false,\n      editingMessage: null,\n      newMessage: \"\",\n      hover: \"\",\n      serverUserList: [],\n      isLoading: false\n    }\n  }\n\n  useOnClickOutside = (ref, handler) => {\n    const listener = event => {\n      // Do nothing if clicking ref's element or descendent elements\n      if (!ref.current || ref.current.contains(event.target)) {\n        return;\n      }\n\n      handler(event);\n    };\n\n    document.addEventListener('mousedown', listener);\n    document.addEventListener('touchstart', listener);\n\n    return () => {\n      document.removeEventListener('mousedown', listener);\n      document.removeEventListener('touchstart', listener);\n    };\n  }\n\n  async componentDidMount() {\n    this.setState({ isLoading: true });\n    window.addEventListener('keydown', this.detectEscape);\n    this.props.getUsers();\n\n    this.socket = io(ROOT_URL);\n\n    this.socket.on('connect', () => {\n      this.setState({ serverUserList: this.props.serverUserList, socketId: this.socket.id, namespace: `${ROOT_URL}/${this.props.serverId}`, room: `${ROOT_URL}/chatroom/${this.props.serverId}/${this.props.activeChatroomId}`, previousRoom: `${ROOT_URL}/chatroom/${this.props.serverId}/${this.props.activeChatroomId}`, serverId: this.props.serverId, currentChatroom: this.props.activeChatroom, chatroomId: this.props.activeChatroomId, username: this.props.username });\n\n      this.socket.emit('GET_CHATROOM_MESSAGES', {\n        socketId: this.socket.id,\n        chatroomId: this.props.activeChatroomId,\n        previousRoom: `${ROOT_URL}/chatroom/${this.props.serverId}/${this.props.activeChatroomId}`,\n        room: `${ROOT_URL}/chatroom/${this.props.serverId}/${this.props.activeChatroomId}`\n      });\n\n      this.socket.emit('GET_SERVER_LIST', {\n        socketId: this.socket.id,\n        serverId: this.props.serverId,\n        previousRoom: `${ROOT_URL}/chatroom/${this.props.serverId}/${this.props.activeChatroomId}`,\n        room: `${ROOT_URL}/chatroom/${this.props.serverId}/${this.props.activeChatroomId}`\n      });\n    });\n\n    this.socket.on('RECEIVE_CHATROOM_MESSAGES', (data) => {\n      this.setState({ messageMenu: false, editMessage: null, editingMessage: null, newMessage: \"\" });\n      // scroll to latest message after rendering messages in firefox\n      if (navigator.userAgent.search(\"Firefox\") > -1 || navigator.userAgent.search(\"Edge\") > -1) {\n        this.setState({ messages: data.reverse() }, () => {\n          if (data && data.length > 0) {\n            const element = \"message\" + (this.state.messages.length - 1);\n            if (document.getElementById(element)) {\n              document.getElementById(element).scrollIntoView();\n            }\n          }\n        });\n      } else if (navigator.userAgent.search(\"Firefox\") < 0 || navigator.userAgent.search(\"Edge\") < 0) {\n        this.setState({ messages: data });\n      }\n    });\n\n    this.socket.on('RECEIVE_SERVER_LIST', (data) => {\n      const index = data.findIndex(x => x.username === this.state.username);\n      if (index < 0) {\n        this.props.leaveServer();\n      } else if (index > -1) {\n        this.props.refreshServerUsers();\n        this.setState({ userModalOpen: false, sideUserModalOpen: false, rightClickedUser: {}, sideRightClickedUser: {}, serverUserList: data, isLoading: false });\n      }\n    });\n  }\n\n  async componentWillReceiveProps(nextProps) {\n    if (nextProps.username) {\n      this.setState({ username: nextProps.username });\n    }\n    if (nextProps.serverUserList) {\n      this.setState({ serverUserList: nextProps.serverUserList });\n    }\n    if (nextProps.activeChatroomId !== this.state.chatroomId && this.state.chatroomId !== undefined) {\n      this.setState({\n        previousRoom: `${ROOT_URL}/chatroom/${nextProps.serverId}/${this.state.chatroomId}`,\n        room: `${ROOT_URL}/chatroom/${nextProps.serverId}/${nextProps.activeChatroomId}`,\n        serverId: nextProps.serverId,\n        currentChatroom: nextProps.activeChatroom,\n        chatroomId: nextProps.activeChatroomId\n      });\n      this.socket.emit('GET_CHATROOM_MESSAGES', {\n        socketId: this.state.socketId,\n        chatroomId: nextProps.activeChatroomId,\n        previousRoom: `${ROOT_URL}/chatroom/${nextProps.serverId}/${this.state.chatroomId}`,\n        room: `${ROOT_URL}/chatroom/${nextProps.serverId}/${nextProps.activeChatroomId}`\n      });\n    }\n\n    if (nextProps.users && nextProps.users.length) {\n      const userList = [];\n      for(let i = 0; i < nextProps.users.length; i++) {\n        userList.push(nextProps.users[i]);\n      }\n      this.setState({ users: userList });\n    }\n  }\n\n  componentWillUnmount() {\n    this.socket.emit('LEAVE_CHATROOMS', {\n      room: this.state.room\n    });\n  }\n\n  sendMessage = (event) => {\n    if (event) {\n      event.preventDefault();\n      const data = {\n        username: this.props.username,\n        message: this.state.message,\n        userId: this.props.userId,\n        chatroomId: this.state.chatroomId,\n        room: this.state.room\n      };\n      this.socket.emit('CHATROOM_MESSAGE', data);\n      this.setState({ message: \"\" });\n    }\n  }\n\n  sideContextMenu = (event, item) => {\n    event.preventDefault();\n    this.setState({ sideRightClickedUser: item, sideUserModalOpen: true });\n  }\n\n  contextMenu = (event, item) => {\n    event.preventDefault();\n    this.setState({ rightClickedUser: item, userModalOpen: true, messageMenu: false, editingMessage: null });\n  }\n\n  privateMessageUser = () => {\n    this.setState({ messages: [] });\n    this.props.privateMessageUser(this.state.rightClickedUser);\n  }\n\n  sidePrivateMessageUser = () => {\n    this.setState({ messages: [] });\n    this.props.privateMessageUser(this.state.sideRightClickedUser);\n  }\n\n  openMessageMenu = (item) => {\n    this.setState({ messageMenu: true, editMessage: item });\n  }\n\n  deleteChatroomMessage = () => {\n    const data = {\n      username: this.props.username,\n      message: this.state.message,\n      userId: this.props.userId,\n      chatroomId: this.state.chatroomId,\n      messageId: this.state.editMessage.id,\n      room: this.state.room\n    };\n    this.socket.emit('DELETE_CHATROOM_MESSAGE', data);\n  }\n\n  editChatroomMessage = () => {\n    this.setState({ editingMessage: this.state.editMessage, newMessage: this.state.editMessage.message, hover: \"\" }, () => {\n      this.setState({ editMessage: null, messageMenu: false });\n    });\n  }\n\n  detectEscape = (event) => {\n    if (event.keyCode === 27 && !this.state.messageMenu) {\n      this.setState({ editingMessage: this.state.editMessage, newMessage: \"\" });\n    }\n  }\n\n  sendEditedMessage = (event) => {\n    event.preventDefault();\n    const data = {\n      username: this.props.username,\n      message: this.state.newMessage,\n      userId: this.props.userId,\n      chatroomId: this.state.chatroomId,\n      messageId: this.state.editingMessage.id,\n      room: this.state.room\n    };\n    this.socket.emit('EDIT_CHATROOM_MESSAGE', data);\n  }\n\n  kickUser = (user) => {\n    const data = {\n      serverId: this.state.serverId,\n      chatroomId: this.state.chatroomId,\n      type: 'user',\n      userId: user.userId,\n      room: this.state.room\n    };\n    this.socket.emit('KICK_SERVER_USER', data);\n  }\n\n  banUser = (user) => {\n    const data = {\n      serverId: this.state.serverId,\n      chatroomId: this.state.chatroomId,\n      type: 'user',\n      userId: user.userId,\n      room: this.state.room\n    };\n    this.socket.emit('BAN_SERVER_USER', data);\n  }\n\n  render() {\n    if (this.state.isLoading) {\n      return (\n        <div className=\"chatroom\">\n          <div className=\"chatarea\">\n            <Loading />\n          </div>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"chatroom\">\n          <div className=\"chatarea\">\n            <div className=\"chatarea-topbar\">\n              <img src={numbersign} alt=\"channel\" height={16} width={16} /><span>{this.props.activeChatroom}</span>\n            </div>\n            <div id=\"chatareamessages\" className=\"chatarea-messages\">\n              {this.state.messages && this.state.messages.length > 0 ? this.state.messages.map((item, index) => {\n                const moderate = (this.state.serverUserList.length > 0\n                && this.state.serverUserList.some(serverItem => serverItem['username'] !== this.state.username\n                && (serverItem['username'] === item.username && serverItem['type'] !== 'owner' && serverItem['type'] !== 'admin')));\n                return (\n                  <div id={\"message\" + index} key={index} onMouseEnter={() => { this.setState({ hover: (this.state.editingMessage || this.state.messageMenu || (this.props.userId !== item.userId)) ? \"\" : (\"message\" + index) }) }} onMouseLeave={() => { this.setState({ hover: \"\" }); }}>\n                    <div className=\"chatarea-messages-container\">\n                      <span className=\"chatarea-messages-user\" onClick={this.handleClick} onContextMenu={(event) => { this.contextMenu(event, item); }}>{item.username}</span>\n                      <Moment format=\"MM/DD/YYYY\" date={item.updatedAt} className=\"chatarea-messages-time\" />\n                      {this.state.hover === (\"message\" + index) ? <span className=\"chatarea-messages-menu\" onClick={() => { this.openMessageMenu(item); }}><img src={editwhite} height={15} width={15} alt=\"edit message\" /></span> : null}\n                      {this.state.messageMenu && this.state.editMessage.id === item.id ?\n                        <div className=\"chatarea-messages-editmenu\" ref={this.ref}>\n                          <span onClick={() => { this.setState({ editMessage: null, messageMenu: false }); }}>&#10005;</span>\n                          <p onClick={() => { this.editChatroomMessage(); }}>Edit</p>\n                          <p onClick={() => { this.deleteChatroomMessage(); }}>Delete</p>\n                        </div>\n                      : null}\n                      {this.state.userModalOpen && this.state.rightClickedUser.id === item.id ?\n                        <div ref={this.ref} className={moderate === true ?\"chatarea-messages-usermodalmod\" : \"chatarea-messages-usermodal\"}>\n                          <span onClick={() => { this.setState({ userModalOpen: false }); }}>&#10005;</span>\n                          <p onClick={() => { this.privateMessageUser(); }} className={moderate === true ? \"chatarea-messages-usermodalmod-privatemessage\" : \"chatarea-messages-usermodal-privatemessage\"}>Send Message</p>\n\n                          {moderate === true ? <p onClick={() => { this.kickUser(item); }} className=\"chatarea-messages-usermodalmod-kick\">Kick {item.username}</p> : null}\n\n                          {moderate === true ? <p onClick={() => { this.banUser(item); }} className=\"chatarea-messages-usermodalmod-ban\">Ban {item.username}</p> : null}\n                        </div>\n                      : null}\n                    </div>\n                    {this.state.editingMessage !== null && this.state.editingMessage.id === item.id ? <span><input className=\"chatarea-messages-editmessage\" onChange={(event) => { this.setState({ newMessage: event.target.value }) }} value={this.state.newMessage} onKeyDown={(event) => { event.keyCode === 13 && event.shiftKey === false ? this.sendEditedMessage(event) : this.sendMessage(null) }} /><p className=\"chatarea-messages-editmessage-note\">escape to cancel  enter to save</p></span> : <p className=\"chatarea-messages-message\">{item.message}</p>}\n                  </div>\n                )\n              }) : null}\n            </div>\n            <div className=\"chatarea-container\">\n              <input placeholder=\"Send a message!\" type=\"text\" onChange={(event) => { this.setState({ message: event.target.value }); }} value={this.state.message} onKeyDown={(event) => { event.keyCode === 13 && event.shiftKey === false ? this.sendMessage(event) : this.sendMessage(null) }}></input>\n            </div>\n          </div>\n          <div className=\"sidebarright\">\n            <div className=\"sidebarright-container\">\n              <input placeholder=\"Filter users in server\"></input>\n            </div>\n            <div className=\"sidebarright-border\" />\n            <div className=\"sidebarright-authority\">\n              <span>Room Owners</span>\n            </div>\n            <div className=\"sidebarright-bordertwo\" />\n            {this.state.serverUserList.length > 0 ? this.state.serverUserList.map((user, index)  => {\n              return (\n                <div key={index} className={user.type === 'owner' ? \"sidebarright-usercontainer\" : \"\"} onClick={this.handleClick} onContextMenu={(event) => { this.sideContextMenu(event, user); }}>\n                  {user.type === 'owner' ? <div className=\"username\">\n                    <img className=\"username-image\" src={user.imageUrl ? user.imageUrl : chatot} alt=\"username-icon\" />\n                  </div> : null}\n                  {user.type === 'owner' && user.active ? <div className=\"userinfo-online\"></div> : null}\n                  {user.type === 'owner' && !user.active ? <div className=\"userinfo-offline\"></div> : null}\n                  {user.type === 'owner' ?\n                    <div>\n                      <span className=\"sidebarright-user\">{user.username}</span>\n                      {this.state.sideUserModalOpen && user.type === 'owner' && this.state.sideRightClickedUser.username === user.username ?\n                        <div ref={this.ref} className=\"chatarea-messages-sideusermodal\">\n                          <span onClick={() => { this.setState({ sideUserModalOpen: false }); }}>&#10005;</span>\n                          <p onClick={() => { this.sidePrivateMessageUser(); }} className=\"chatarea-messages-sideusermodal-privatemessage\">Send Message</p>\n                        </div>\n                      : null}\n                    </div>\n                  : null}\n                </div>\n              );\n            }) : null}\n            {this.state.serverUserList.length > 0 && this.state.serverUserList.some(item => item['type'] === 'owner') ? <div className=\"sidebarright-bordertwo\" /> : null}\n            <div className=\"sidebarright-authority\">\n              <span>Administrators</span>\n            </div>\n            <div className=\"sidebarright-bordertwo\" />\n            {this.state.serverUserList.length > 0 ? this.state.serverUserList.map((user, index)  => {\n              return (\n                <div key={index} className={user.type === 'admin' ? \"sidebarright-usercontainer\" : \"\"} onClick={this.handleClick} onContextMenu={(event) => { this.sideContextMenu(event, user); }}>\n                  {user.type === 'admin' ? <div className=\"username\">\n                    <img className=\"username-image\" src={user.imageUrl ? user.imageUrl : chatot} alt=\"username-icon\" />\n                  </div> : null}\n                  {user.type === 'admin' && user.active ? <div className=\"userinfo-online\"></div> : null}\n                  {user.type === 'admin' && !user.active ? <div className=\"userinfo-offline\"></div> : null}\n                  {user.type === 'admin' ?\n                    <div>\n                      <span className=\"sidebarright-user\">{user.username}</span>\n                      {this.state.sideUserModalOpen && user.type === 'admin' && this.state.sideRightClickedUser.username === user.username ?\n                        <div ref={this.ref} className=\"chatarea-messages-sideusermodal\">\n                          <span onClick={() => { this.setState({ sideUserModalOpen: false }); }}>&#10005;</span>\n                          <p onClick={() => { this.sidePrivateMessageUser(); }} className=\"chatarea-messages-sideusermodal-privatemessage\">Send Message</p>\n                        </div>\n                      : null}\n                    </div>\n                  : null}\n                </div>\n              );\n            }) : null}\n            {this.state.serverUserList.length > 0 && this.state.serverUserList.some(item => item['type'] === 'admin') ? <div className=\"sidebarright-bordertwo\" /> : null}\n            <div className=\"sidebarright-authority\">\n              <span>Moderators</span>\n            </div>\n            <div className=\"sidebarright-bordertwo\" />\n            {this.state.serverUserList.length > 0 ? this.state.serverUserList.map((user, index)  => {\n              const moderate = (user.username !== this.state.username);\n              return (\n                <div key={index} className={user.type === 'moderator' ? \"sidebarright-usercontainer\" : \"\"} onClick={this.handleClick} onContextMenu={(event) => { this.sideContextMenu(event, user); }}>\n                  {user.type === 'moderator' ? <div className=\"username\">\n                    <img className=\"username-image\" src={user.imageUrl ? user.imageUrl : chatot} alt=\"username-icon\" />\n                  </div> : null}\n                  {user.type === 'moderator' && user.active ? <div className=\"userinfo-online\"></div> : null}\n                  {user.type === 'moderator' && !user.active ? <div className=\"userinfo-offline\"></div> : null}\n                  {user.type === 'moderator' ?\n                    <div>\n                      <span className=\"sidebarright-user\">{user.username}</span>\n                      {this.state.sideUserModalOpen && user.type === 'moderator' && this.state.sideRightClickedUser.username === user.username ?\n                        <div ref={this.ref} className={moderate === true ?\"chatarea-messages-sideusermodalmod\" : \"chatarea-messages-sideusermodal\"}>\n                          <span onClick={() => { this.setState({ sideUserModalOpen: false }); }}>&#10005;</span>\n                          <p onClick={() => { this.sidePrivateMessageUser(); }} className={moderate === true ? \"chatarea-messages-sideusermodalmod-privatemessage\" : \"chatarea-messages-sideusermodal-privatemessage\"}>Send Message</p>\n\n                          {moderate === true ? <p onClick={() => { this.kickUser(user); }} className=\"chatarea-messages-sideusermodalmod-kick\">Kick {user.username}</p> : null}\n\n                          {moderate === true ? <p onClick={() => { this.banUser(user); }} className=\"chatarea-messages-sideusermodalmod-ban\">Ban {user.username}</p> : null}\n                        </div>\n                      : null}\n                    </div>\n                  : null}\n                </div>\n              );\n            }) : null}\n            {this.state.serverUserList.length > 0 && this.state.serverUserList.some(item => item['type'] === 'moderator') ? <div className=\"sidebarright-bordertwo\" /> : null}\n            <div className=\"sidebarright-authority\">\n              <span>Voice</span>\n            </div>\n            <div className=\"sidebarright-bordertwo\" />\n            {this.state.serverUserList.length > 0 ? this.state.serverUserList.map((user, index) => {\n              const moderate = (user.username !== this.state.username);\n              return (\n                <div key={index} className={user.type === 'voice' ? \"sidebarright-usercontainer\" : \"\"} onClick={this.handleClick} onContextMenu={(event) => { this.sideContextMenu(event, user); }}>\n                  {user.type === 'voice' ? <div className=\"username\">\n                    <img className=\"username-image\" src={user.imageUrl ? user.imageUrl : chatot} alt=\"username-icon\" />\n                  </div> : null}\n                  {user.type === 'voice' && user.active ? <div className=\"userinfo-online\"></div> : null}\n                  {user.type === 'voice' && !user.active ? <div className=\"userinfo-offline\"></div> : null}\n                  {user.type === 'voice' ?\n                    <div>\n                      <span className=\"sidebarright-user\">{user.username}</span>\n                      {this.state.sideUserModalOpen && user.type === 'voice' && this.state.sideRightClickedUser.username === user.username ?\n                        <div ref={this.ref} className={moderate === true ?\"chatarea-messages-sideusermodalmod\" : \"chatarea-messages-sideusermodal\"}>\n                          <span onClick={() => { this.setState({ sideUserModalOpen: false }); }}>&#10005;</span>\n                          <p onClick={() => { this.sidePrivateMessageUser(); }} className={moderate === true ? \"chatarea-messages-sideusermodalmod-privatemessage\" : \"chatarea-messages-sideusermodal-privatemessage\"}>Send Message</p>\n\n                          {moderate === true ? <p onClick={() => { this.kickUser(user); }} className=\"chatarea-messages-sideusermodalmod-kick\">Kick {user.username}</p> : null}\n\n                          {moderate === true ? <p onClick={() => { this.banUser(user); }} className=\"chatarea-messages-sideusermodalmod-ban\">Ban {user.username}</p> : null}\n                        </div>\n                      : null}\n                    </div>\n                  : null}\n                </div>\n              );\n            }) : null}\n            {this.state.serverUserList.length > 0 && this.state.serverUserList.some(item => item['type'] === 'voice') ? <div className=\"sidebarright-bordertwo\" /> : null}\n            <div className=\"sidebarright-authority\">\n              <span>Users</span>\n            </div>\n            <div className=\"sidebarright-bordertwo\" />\n            {this.state.serverUserList.length > 0 ? this.state.serverUserList.map((user, index) => {\n              const moderate = (user.username !== this.state.username);\n              return (\n                <div key={index} className={user.type === 'user' ? \"sidebarright-usercontainer\" : \"\"} onClick={this.handleClick} onContextMenu={(event) => { this.sideContextMenu(event, user); }}>\n                  {user.type === 'user' ? <div className=\"username\">\n                    <img className=\"username-image\" src={user.imageUrl ? user.imageUrl : chatot} alt=\"username-icon\" />\n                  </div> : null}\n                  {user.type === 'user' && user.active ? <div className=\"userinfo-online\"></div> : null}\n                  {user.type === 'user' && !user.active ? <div className=\"userinfo-offline\"></div> : null}\n                  {user.type === 'user' ?\n                    <div>\n                      <span className=\"sidebarright-user\">{user.username}</span>\n                      {this.state.sideUserModalOpen && user.type === 'user' && this.state.sideRightClickedUser.username === user.username ?\n                        <div ref={this.ref} className={moderate === true ?\"chatarea-messages-sideusermodalmod\" : \"chatarea-messages-sideusermodal\"}>\n                          <span onClick={() => { this.setState({ sideUserModalOpen: false }); }}>&#10005;</span>\n                          <p onClick={() => { this.sidePrivateMessageUser(); }} className={moderate === true ? \"chatarea-messages-sideusermodalmod-privatemessage\" : \"chatarea-messages-sideusermodal-privatemessage\"}>Send Message</p>\n\n                          {moderate === true ? <p onClick={() => { this.kickUser(user); }} className=\"chatarea-messages-sideusermodalmod-kick\">Kick {user.username}</p> : null}\n\n                          {moderate === true ? <p onClick={() => { this.banUser(user); }} className=\"chatarea-messages-sideusermodalmod-ban\">Ban {user.username}</p> : null}\n                        </div>\n                      : null}\n                    </div>\n                  : null}\n                </div>\n              )\n            }) : null}\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nfunction mapStateToProps({ usersReducer }) {\n  return {\n    error: usersReducer.error,\n    isLoading: usersReducer.isLoading,\n    success: usersReducer.success,\n    user: usersReducer.user,\n    users: usersReducer.users\n  };\n}\n\nexport default connect(mapStateToProps, actions)(Chatroom);"]},"metadata":{},"sourceType":"module"}